{"remainingRequest":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js?id=babel!/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js??ref--4-2!/Users/kalec/WebstormProjects/management_system/src/redux/actions/request.tool.ts","dependencies":[{"path":"/Users/kalec/WebstormProjects/management_system/src/redux/actions/request.tool.ts","mtime":1531805928000},{"path":"/Users/kalec/WebstormProjects/management_system/.babelrc","mtime":1531931596000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js","mtime":1451208347000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js","mtime":1530127508000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tslib = require(\"tslib\");\n\nvar tslib_1 = _interopRequireWildcard(_tslib);\n\nvar _ = require(\".\");\n\nvar _axios = require(\"../../util/axios\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n(function () {\n    var enterModule = require('react-hot-loader').enterModule;\n\n    enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HttpRequest = function () {\n    function HttpRequest(reqConf) {\n        var _this = this;\n\n        _classCallCheck(this, HttpRequest);\n\n        /**\n         * computedLoadState\n         */\n        this.computedLoadState = function (dispatch) {\n            return function (loadState) {\n                return dispatch((0, _.loadingState)(loadState));\n            };\n        };\n        this.reqInf = function (dispatch) {\n            return tslib_1.__awaiter(_this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                var res;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.prev = 0;\n                                _context.next = 3;\n                                return (0, _axios2.default)(this.computedLoadState(dispatch))(this.reqConf);\n\n                            case 3:\n                                res = _context.sent;\n\n                                if (!(res.data.status === 0)) {\n                                    _context.next = 8;\n                                    break;\n                                }\n\n                                dispatch(this.successCb(res.data.data));\n                                _context.next = 9;\n                                break;\n\n                            case 8:\n                                throw res.data.msg;\n\n                            case 9:\n                                _context.next = 15;\n                                break;\n\n                            case 11:\n                                _context.prev = 11;\n                                _context.t0 = _context[\"catch\"](0);\n\n                                console.log(_context.t0);\n                                if (this.errorCb) {\n                                    dispatch(this.errorCb(_context.t0));\n                                }\n\n                            case 15:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[0, 11]]);\n            }));\n        };\n        this.reqConf = reqConf;\n    }\n\n    _createClass(HttpRequest, [{\n        key: \"__reactstandin__regenerateByEval\",\n        // @ts-ignore\n        value: function __reactstandin__regenerateByEval(key, code) {\n            // @ts-ignore\n            this[key] = eval(code);\n        }\n    }]);\n\n    return HttpRequest;\n}();\n\nvar _default = HttpRequest;\nexports.default = _default;\n;\n\n(function () {\n    var reactHotLoader = require('react-hot-loader').default;\n\n    var leaveModule = require('react-hot-loader').leaveModule;\n\n    if (!reactHotLoader) {\n        return;\n    }\n\n    reactHotLoader.register(HttpRequest, \"HttpRequest\", \"/Users/kalec/WebstormProjects/management_system/src/redux/actions/request.tool.ts\");\n    reactHotLoader.register(_default, \"default\", \"/Users/kalec/WebstormProjects/management_system/src/redux/actions/request.tool.ts\");\n    leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/kalec/WebstormProjects/management_system/src/redux/actions/request.tool.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA;;AACA;;;;;;;;;;;;;;;;IASc,W;AAKV,yBAAY,OAAZ,EAA4B;AAAA;;AAAA;;AAI5B;;;AAGU,aAAA,iBAAA,GAAoB,UAAC,QAAD;AAAA,mBAA0C,UAAC,SAAD;AAAA,uBAAuB,SAAS,oBAAa,SAAb,CAAT,CAAvB;AAAA,aAA1C;AAAA,SAApB;AAEH,aAAA,MAAA,GAAS,UACZ,QADY;AAAA,mBAEZ,QAAA,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,uCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAEoB,qBACZ,KAAK,iBAAL,CAAuB,QAAvB,CADY,EAEd,KAAK,OAFS,CAFpB;;AAAA;AAEQ,mCAFR;;AAAA,sCAMO,IAAI,IAAJ,CAAS,MAAT,KAAoB,CAN3B;AAAA;AAAA;AAAA;;AAOQ,yCAAS,KAAK,SAAL,CAAe,IAAI,IAAJ,CAAS,IAAxB,CAAT;AAPR;AAAA;;AAAA;AAAA,sCASc,IAAI,IAAJ,CAAS,GATvB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAYI,wCAAQ,GAAR;AAEA,oCAAG,KAAK,OAAR,EAAiB;AACb,6CAAS,KAAK,OAAL,aAAT;AACH;;AAhBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAA,EAFY;AAAA,SAAT;AARH,aAAK,OAAL,GAAe,OAAf;AACH;;;;;;;;;;;;;;eAPS,W;;;;;;;;;;;;;4BAAA,W","sourcesContent":["import { Dispatch } from \"../../../node_modules/redux\";\nimport { loadingState, EnthusiasmAction } from \".\";\nimport axios from '../../util/axios'\n\nexport interface ReqConf {\n    method: string;\n    url: string;\n    params?: {};\n    data?: {};\n}\n\nexport default abstract class HttpRequest<T extends EnthusiasmAction, U extends EnthusiasmAction> {\n    protected successCb: (data) => T;\n    protected errorCb: (mag) => U;\n    protected reqConf: ReqConf;\n\n    constructor(reqConf: ReqConf){\n        this.reqConf = reqConf;\n    }\n\n    /**\n     * computedLoadState\n     */\n    protected computedLoadState = (dispatch: Dispatch<EnthusiasmAction>) => (loadState:boolean) => dispatch(loadingState(loadState));\n\n    public reqInf = async (\n        dispatch: Dispatch<EnthusiasmAction>\n    ) => {\n        try {\n            let res = await axios(\n                this.computedLoadState(dispatch)\n            )(this.reqConf);\n    \n            if(res.data.status === 0) {\n                dispatch(this.successCb(res.data.data))\n            } else {\n                throw res.data.msg\n            }\n        } catch (error) {\n            console.log(error);\n\n            if(this.errorCb) {\n                dispatch(this.errorCb(error))\n            }\n        }\n    }\n}\n"],"sourceRoot":""}]}