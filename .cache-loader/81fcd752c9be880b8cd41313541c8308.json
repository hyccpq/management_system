{"remainingRequest":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js?id=babel!/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js??ref--4-2!/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx","dependencies":[{"path":"/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx","mtime":1531930697000},{"path":"/Users/kalec/WebstormProjects/management_system/.babelrc","mtime":1531931596000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js","mtime":1451208347000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js","mtime":1530127508000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _table = require('antd/lib/table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nrequire('antd/lib/table/style');\n\nvar _tslib = require('tslib');\n\nvar tslib_1 = _interopRequireWildcard(_tslib);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactRedux = require('react-redux');\n\nvar _actions = require('../redux/actions');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n    var enterModule = require('react-hot-loader').enterModule;\n\n    enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar UserList = function (_React$Component) {\n    _inherits(UserList, _React$Component);\n\n    function UserList() {\n        _classCallCheck(this, UserList);\n\n        var _this = _possibleConstructorReturn(this, (UserList.__proto__ || Object.getPrototypeOf(UserList)).apply(this, arguments));\n\n        _this.state = {\n            columns: [{\n                title: '编号',\n                dataIndex: 'id',\n                width: 100\n            }, {\n                title: '用户名',\n                dataIndex: 'username',\n                width: 150\n            }, {\n                title: '邮箱',\n                dataIndex: 'email',\n                width: 200\n            }, {\n                title: '电话',\n                dataIndex: 'phone'\n            }],\n            data: [],\n            total: 0\n        };\n        _this.pageChange = function (page, pageSize) {\n            console.log(page, pageSize);\n            _this.requestUserList(page, pageSize);\n        };\n        _this.onShowSizeChange = function (current, pageSize) {\n            console.log(current, pageSize);\n            _this.requestUserList(current, pageSize);\n        };\n        return _this;\n    }\n\n    _createClass(UserList, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            this.requestUserList();\n        }\n    }, {\n        key: 'requestUserList',\n        value: function requestUserList() {\n            var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n            var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n            return tslib_1.__awaiter(this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                var preListData, listData, i, item;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.props.userInfoReq(pageSize, currentPage);\n\n                            case 2:\n                                console.log(this.props.userData);\n                                preListData = this.props.userData.user.list;\n                                listData = [];\n\n                                for (i = 0; i < preListData.length; i++) {\n                                    item = preListData[i];\n\n                                    item.key = i;\n                                    listData.push(item);\n                                }\n                                this.setState({\n                                    data: listData,\n                                    total: this.props.userData.user.total\n                                });\n                                console.log(this.state.data);\n\n                            case 8:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var total = this.state.total;\n\n            return React.createElement(\"div\", null, React.createElement(\"h1\", null, '\\u7528\\u6237\\u5217\\u8868 '), React.createElement(_table2.default, { columns: this.state.columns, dataSource: this.state.data, pagination: {\n                    total: total,\n                    showSizeChanger: true,\n                    onShowSizeChange: this.onShowSizeChange,\n                    onChange: this.pageChange\n                }, scroll: { y: '100%' } }));\n        }\n    }, {\n        key: '__reactstandin__regenerateByEval',\n        // @ts-ignore\n        value: function __reactstandin__regenerateByEval(key, code) {\n            // @ts-ignore\n            this[key] = eval(code);\n        }\n    }]);\n\n    return UserList;\n}(React.Component);\n\nvar mapStateProps = function mapStateProps(state) {\n    return {\n        userData: state.userInfoList\n    };\n};\nvar mapDispatchToProps = {\n    userInfoReq: _actions.userInfoReq\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateProps, mapDispatchToProps)(UserList);\n\nexports.default = _default;\n;\n\n(function () {\n    var reactHotLoader = require('react-hot-loader').default;\n\n    var leaveModule = require('react-hot-loader').leaveModule;\n\n    if (!reactHotLoader) {\n        return;\n    }\n\n    reactHotLoader.register(UserList, 'UserList', '/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx');\n    reactHotLoader.register(mapStateProps, 'mapStateProps', '/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx');\n    reactHotLoader.register(mapDispatchToProps, 'mapDispatchToProps', '/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx');\n    reactHotLoader.register(_default, 'default', '/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx');\n    leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/kalec/WebstormProjects/management_system/src/page/userList.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;IAAY,K;;AACZ;;AAEA;;;;;;;;;;;;;;;;;;IAmBA,Q;;;AAAA,wBAAA;AAAA;;AAAA,yH,SAAA;;AACU,cAAA,KAAA,GAAuB;AAC/B,qBAAS,CACC;AACI,uBAAO,IADX;AAEI,2BAAW,IAFf;AAGI,uBAAO;AAHX,aADD,EAMR;AACC,uBAAO,KADR;AAEC,2BAAW,UAFZ;AAGC,uBAAO;AAHR,aANQ,EAWR;AACC,uBAAO,IADR;AAEC,2BAAW,OAFZ;AAGC,uBAAO;AAHR,aAXQ,EAgBR;AACC,uBAAO,IADR;AAEC,2BAAW;AAFZ,aAhBQ,CADsB;AAsBzB,kBAAM,EAtBmB;AAuBzB,mBAAO;AAvBkB,SAAvB;AAiDE,cAAA,UAAA,GAAa,UAAC,IAAD,EAAe,QAAf,EAAmC;AACpD,oBAAQ,GAAR,CAAY,IAAZ,EAAkB,QAAlB;AACA,kBAAK,eAAL,CAAqB,IAArB,EAA2B,QAA3B;AACH,SAHO;AAKA,cAAA,gBAAA,GAAmB,UAAC,OAAD,EAAkB,QAAlB,EAAsC;AAC7D,oBAAQ,GAAR,CAAY,OAAZ,EAAqB,QAArB;AACA,kBAAK,eAAL,CAAqB,OAArB,EAA8B,QAA9B;AACH,SAHO;AAvDZ;AA+EC;;;;6CApDqB;AACd,iBAAK,eAAL;AACH;;;0CAE4E;AAAA,gBAA9C,WAA8C,uEAAxB,CAAwB;AAAA,gBAArB,QAAqB,uEAAF,EAAE;;;;;;;;;uCACnE,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,EAAiC,WAAjC,C;;;AACN,wCAAQ,GAAR,CAAY,KAAK,KAAL,CAAW,QAAvB;AAEI,2C,GAAc,KAAK,KAAL,CAAW,QAAX,CAAoB,IAApB,CAAyB,I;AACvC,wC,GAAiB,E;;AAErB,qCAAS,CAAT,GAAa,CAAb,EAAgB,IAAI,YAAY,MAAhC,EAAwC,GAAxC,EAA6C;AACrC,wCADqC,GAC9B,YAAY,CAAZ,CAD8B;;AAEzC,yCAAK,GAAL,GAAW,CAAX;AACA,6CAAS,IAAT,CAAc,IAAd;AACH;AACD,qCAAK,QAAL,CAAc;AACV,0CAAM,QADI;AAEV,2CAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,IAApB,CAAyB;AAFtB,iCAAd;AAIA,wCAAQ,GAAR,CAAY,KAAK,KAAL,CAAW,IAAvB;;;;;;;;;AACH;;;iCAYS;AAAA,gBACA,KADA,GACU,KAAK,KADf,CACA,KADA;;AAEZ,mBACC,MAAA,aAAA,CAAA,KAAA,EAAA,IAAA,EACC,MAAA,aAAA,CAAA,IAAA,EAAA,IAAA,EAAA,2BAAA,CADD,EAEC,MAAA,aAAA,kBAAM,EACL,SAAS,KAAK,KAAL,CAAW,OADf,EAEL,YAAY,KAAK,KAAL,CAAW,IAFlB,EAGL,YAAY;AACO,gCADP;AAEO,qCAAiB,IAFxB;AAGO,sCAAkB,KAAK,gBAH9B;AAIO,8BAAU,KAAK;AAJtB,iBAHP,EASL,QAAQ,EAAE,GAAG,MAAL,EATH,EAAN,CAFD,CADD;AAgBA;;;;;;;;;;;EA9EqB,MAAM,S;;AAiF7B,IAAM,gBAAgB,SAAhB,aAAgB,CAAC,KAAD,EAA+B;AACpD,WAAO;AACA,kBAAU,MAAM;AADhB,KAAP;AAGA,CAJD;AAMA,IAAM,qBAAwC;AAC1C;AAD0C,CAA9C;;eAIe,yBAAQ,aAAR,EAAuB,kBAAvB,EAA2C,QAA3C,C;;;;;;;;;;;;;;4BA3Ff,Q;4BAiFM,a;4BAMA,kB","sourcesContent":["import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Table } from 'antd';\nimport { userInfoReq } from '../redux/actions'\nimport { AppState } from '../redux';\n\nexport interface UserListProps extends UserProps, UserDispatchProps {}\n\nexport interface UserProps {\n    userData: any;\n}\n\nexport interface UserDispatchProps {\n    userInfoReq: (pageSize: number, pageNum: number) => {};\n}\n\nexport interface UserListState {\n    columns: {}[];\n    data: {}[];\n    total: number;\n}\n\nclass UserList extends React.Component<UserListProps, UserListState> {\n\treadonly state: UserListState = {\n\t\tcolumns: [\n            {\n                title: '编号',\n                dataIndex: 'id',\n                width: 100\n            },\n\t\t\t{\n\t\t\t\ttitle: '用户名',\n\t\t\t\tdataIndex: 'username',\n\t\t\t\twidth: 150\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '邮箱',\n\t\t\t\tdataIndex: 'email',\n\t\t\t\twidth: 200\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '电话',\n\t\t\t\tdataIndex: 'phone'\n\t\t\t}\n\t\t],\n        data: [],\n        total: 0\n    };\n    \n    componentWillMount () {\n        this.requestUserList();\n    }\n\n    private async requestUserList (currentPage: number = 1, pageSize: number = 10) {\n        await this.props.userInfoReq(pageSize, currentPage);\n        console.log(this.props.userData);\n        \n        let preListData = this.props.userData.user.list;\n        let listData: {}[] = [];\n\n        for (let i = 0; i < preListData.length; i++) {\n            let item = preListData[i];\n            item.key = i;\n            listData.push(item)     \n        }\n        this.setState({\n            data: listData,\n            total: this.props.userData.user.total\n        })\n        console.log(this.state.data);\n    }\n\n    private pageChange = (page: number, pageSize: number) => {\n        console.log(page, pageSize);\n        this.requestUserList(page, pageSize);\n    }\n\n    private onShowSizeChange = (current: number, pageSize: number) => {\n        console.log(current, pageSize);\n        this.requestUserList(current, pageSize); \n    }\n\n\tpublic render() {\n        let { total } = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h1>用户列表 </h1>\n\t\t\t\t<Table\n\t\t\t\t\tcolumns={this.state.columns}\n\t\t\t\t\tdataSource={this.state.data}\n\t\t\t\t\tpagination={{ \n                        total,\n                        showSizeChanger: true,\n                        onShowSizeChange: this.onShowSizeChange,\n                        onChange: this.pageChange \n                    }}\n\t\t\t\t\tscroll={{ y: '100%' }}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateProps = (state: AppState): UserProps => {\n\treturn {\n        userData: state.userInfoList\n    };\n};\n\nconst mapDispatchToProps: UserDispatchProps = {\n    userInfoReq\n}\n\nexport default connect(mapStateProps, mapDispatchToProps)(UserList);\n"],"sourceRoot":""}]}