{"remainingRequest":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js?id=babel!/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js??ref--4-2!/Users/kalec/WebstormProjects/management_system/src/components/login.tsx","dependencies":[{"path":"/Users/kalec/WebstormProjects/management_system/src/components/login.tsx","mtime":1531930562000},{"path":"/Users/kalec/WebstormProjects/management_system/.babelrc","mtime":1531931596000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/happypack/loader.js","mtime":1451208347000},{"path":"/Users/kalec/WebstormProjects/management_system/node_modules/ts-loader/index.js","mtime":1530127508000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _button = require('antd/lib/button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _checkbox = require('antd/lib/checkbox');\n\nvar _checkbox2 = _interopRequireDefault(_checkbox);\n\nvar _icon = require('antd/lib/icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _input = require('antd/lib/input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _notification2 = require('antd/lib/notification');\n\nvar _notification3 = _interopRequireDefault(_notification2);\n\nvar _form = require('antd/lib/form');\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nrequire('antd/lib/button/style');\n\nrequire('antd/lib/checkbox/style');\n\nrequire('antd/lib/icon/style');\n\nrequire('antd/lib/input/style');\n\nrequire('antd/lib/notification/style');\n\nrequire('antd/lib/form/style');\n\nvar _tslib = require('tslib');\n\nvar tslib_1 = _interopRequireWildcard(_tslib);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactRedux = require('react-redux');\n\nvar _actions = require('../redux/actions');\n\nvar _login = require('../style/login.css');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n    var enterModule = require('react-hot-loader').enterModule;\n\n    enterModule && enterModule(module);\n})();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FormItem = _form2.default.Item;\nvar mapStateToProps = function mapStateToProps(state) {\n    return {\n        userInfo: state.user,\n        loadState: state.loadState\n    };\n};\nvar mapDispatchToProps = {\n    login: _actions.login\n};\n\nvar Login = function (_React$Component) {\n    _inherits(Login, _React$Component);\n\n    function Login() {\n        _classCallCheck(this, Login);\n\n        var _this = _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).apply(this, arguments));\n\n        _this.state = {\n            userName: '',\n            password: ''\n        };\n        // setState(partialState: Partial<LoginState>){}\n        _this.handleSubmit = function (e) {\n            e.preventDefault();\n            _this.props.form.validateFields(function (err, values) {\n                if (!err) {\n                    console.log('Received values of form: ', values);\n                }\n            });\n        };\n        _this.getUserFrom = function (e) {\n            var inputValue = e.currentTarget.value;\n            var inputName = e.currentTarget.name;\n            _this.setState(_defineProperty({}, inputName, inputValue));\n        };\n        /**\n         * loginSystem\n         */\n        _this.loginSystem = function () {\n            return tslib_1.__awaiter(_this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return this.props.login(this.state.userName, this.state.password);\n\n                            case 2:\n                                if (this.props.userInfo.success) {\n                                    _notification3.default.success({\n                                        message: '登陆成功',\n                                        description: '欢迎回到系统！'\n                                    });\n                                    this.props.history.push('/');\n                                } else {\n                                    _notification3.default.error({\n                                        message: '登录失败，请重新登录',\n                                        description: this.props.userInfo.msg\n                                    });\n                                }\n\n                            case 3:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        };\n        return _this;\n    }\n\n    _createClass(Login, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                userInfo = _props.userInfo,\n                loadState = _props.loadState;\n            var getFieldDecorator = this.props.form.getFieldDecorator;\n\n            return React.createElement(_form2.default, { onSubmit: this.handleSubmit, className: \"login-form\" }, React.createElement(FormItem, null, getFieldDecorator('userName', {\n                rules: [{ required: true, message: '请输入您的用户名！' }]\n            })(React.createElement(_input2.default, { name: \"userName\", prefix: React.createElement(_icon2.default, { type: \"user\", style: { color: 'rgba(0,0,0,.25)' } }), placeholder: '\\u7528\\u6237\\u540D', onChange: this.getUserFrom }))), React.createElement(FormItem, null, getFieldDecorator('password', {\n                rules: [{ required: true, message: '请输入您的密码！' }]\n            })(React.createElement(_input2.default, { name: \"password\", prefix: React.createElement(_icon2.default, { type: \"lock\", style: { color: 'rgba(0,0,0,.25)' } }), type: \"password\", placeholder: '\\u5BC6\\u7801', onChange: this.getUserFrom }))), React.createElement(FormItem, null, getFieldDecorator('remember', {\n                valuePropName: 'checked',\n                initialValue: true\n            })(React.createElement(_checkbox2.default, null, '\\u8BB0\\u4F4F\\u5BC6\\u7801')), React.createElement(\"a\", { className: _login.loginFormForgot, href: \"\" }, '\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F'), React.createElement(_button2.default, { type: \"primary\", htmlType: \"submit\", className: _login.loginFormButton, onClick: this.loginSystem }, '\\u767B\\u5F55'), '\\u6216\\u8005 ', React.createElement(\"a\", { href: \"\" }, '\\u70B9\\u51FB\\u6B64\\u5904\\u6CE8\\u518C')));\n        }\n    }, {\n        key: '__reactstandin__regenerateByEval',\n        // @ts-ignore\n        value: function __reactstandin__regenerateByEval(key, code) {\n            // @ts-ignore\n            this[key] = eval(code);\n        }\n    }]);\n\n    return Login;\n}(React.Component);\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_form2.default.create()(Login));\n\nexports.default = _default;\n;\n\n(function () {\n    var reactHotLoader = require('react-hot-loader').default;\n\n    var leaveModule = require('react-hot-loader').leaveModule;\n\n    if (!reactHotLoader) {\n        return;\n    }\n\n    reactHotLoader.register(FormItem, 'FormItem', '/Users/kalec/WebstormProjects/management_system/src/components/login.tsx');\n    reactHotLoader.register(mapStateToProps, 'mapStateToProps', '/Users/kalec/WebstormProjects/management_system/src/components/login.tsx');\n    reactHotLoader.register(mapDispatchToProps, 'mapDispatchToProps', '/Users/kalec/WebstormProjects/management_system/src/components/login.tsx');\n    reactHotLoader.register(Login, 'Login', '/Users/kalec/WebstormProjects/management_system/src/components/login.tsx');\n    reactHotLoader.register(_default, 'default', '/Users/kalec/WebstormProjects/management_system/src/components/login.tsx');\n    leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/kalec/WebstormProjects/management_system/src/components/login.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Icon, Input, Button, Checkbox, notification } from 'antd';\nimport { FormComponentProps } from 'antd/lib/form/Form';\nimport { login } from '../redux/actions';\nimport { loginFormForgot, loginFormButton } from '../style/login.css';\nimport { AppState } from '../redux';\n\nconst FormItem = Form.Item;\n\nexport interface LoginState {\n\tuserName: string;\n\tpassword: string;\n}\n\nexport interface LoginProps extends FormComponentProps, ActionsProps, ReduxProps {\n\thistory: {\n\t\tpush: (url: string) => void;\n\t}\n}\nexport interface ActionsProps {\n\tlogin: (userName: string, password: string) => {};\n}\n\nexport interface ReduxProps {\n\tuserInfo: any;\n\tloadState: boolean;\n}\n\nconst mapStateToProps = (state: AppState): ReduxProps => {\n\treturn {\n\t\tuserInfo: state.user,\n\t\tloadState: state.loadState\n\t};\n};\n\nconst mapDispatchToProps: ActionsProps = {\n\tlogin\n};\n\nclass Login extends React.Component<LoginProps, LoginState> {\n\treadonly state: LoginState = {\n\t\tuserName: '',\n\t\tpassword: ''\n\t};\n\n\t// setState(partialState: Partial<LoginState>){}\n\n\tpublic handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tthis.props.form.validateFields((err, values) => {\n\t\t\tif (!err) {\n\t\t\t\tconsole.log('Received values of form: ', values);\n\t\t\t}\n\t\t});\n\t};\n\n\tpublic getUserFrom = (e: React.SyntheticEvent<HTMLInputElement>) => {\n\t\tlet inputValue: string = e.currentTarget.value;\n\t\tlet inputName = e.currentTarget.name as keyof LoginState;\n\t\tthis.setState({\n\t\t\t[inputName]: inputValue\n\t\t} as Pick<LoginState, keyof LoginState>);\n\t};\n\n\t/**\n\t * loginSystem\n\t */\n\tpublic loginSystem = async () => {\n\t\tawait this.props.login(this.state.userName, this.state.password);\n\t\t\n\t\tif (this.props.userInfo.success) {\n\t\t\tnotification.success({\n\t\t\t\tmessage: '登陆成功',\n\t\t\t\tdescription: '欢迎回到系统！'\n\t\t\t});\n\t\t\tthis.props.history.push('/');\n\t\t} else {\n\t\t\tnotification.error({\n\t\t\t\tmessage: '登录失败，请重新登录',\n\t\t\t\tdescription: this.props.userInfo.msg\n\t\t\t});\n\t\t}\n\t};\n\n\tpublic render() {\n\t\tconst { userInfo, loadState } = this.props;\n\t\tconst { getFieldDecorator } = this.props.form;\n\t\treturn (\n\t\t\t<Form onSubmit={this.handleSubmit} className=\"login-form\">\n\t\t\t\t<FormItem>\n\t\t\t\t\t{getFieldDecorator('userName', {\n\t\t\t\t\t\trules: [ { required: true, message: '请输入您的用户名！' } ]\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tname=\"userName\"\n\t\t\t\t\t\t\tprefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n\t\t\t\t\t\t\tplaceholder=\"用户名\"\n\t\t\t\t\t\t\tonChange={this.getUserFrom}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</FormItem>\n\t\t\t\t<FormItem>\n\t\t\t\t\t{getFieldDecorator('password', {\n\t\t\t\t\t\trules: [ { required: true, message: '请输入您的密码！' } ]\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tprefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"密码\"\n\t\t\t\t\t\t\tonChange={this.getUserFrom}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</FormItem>\n\t\t\t\t<FormItem>\n\t\t\t\t\t{getFieldDecorator('remember', {\n\t\t\t\t\t\tvaluePropName: 'checked',\n\t\t\t\t\t\tinitialValue: true\n\t\t\t\t\t})(<Checkbox>记住密码</Checkbox>)}\n\t\t\t\t\t<a className={loginFormForgot} href=\"\">\n\t\t\t\t\t\t忘记密码？\n\t\t\t\t\t</a>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className={loginFormButton} onClick={this.loginSystem}>\n\t\t\t\t\t\t登录\n\t\t\t\t\t</Button>\n\t\t\t\t\t或者 <a href=\"\">点击此处注册</a>\n\t\t\t\t</FormItem>\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Form.create()(Login));\n"],"sourceRoot":""}]}